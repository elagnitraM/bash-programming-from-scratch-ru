# Операционная система

## Задачи

// TODO

## Разновидности

Спор о том, какая операционная система лучше, идёт не один десяток лет. Сегодня на рынке настольных компьютеров доминируют три основных семейства ОС:

* [Windows](https://ru.wikipedia.org/wiki/Windows)
* [Linux](https://ru.wikipedia.org/wiki/Linux)
* [MacOS](https://ru.wikipedia.org/wiki/MacOS)

Первые две примечательны тем, что не привязаны к конкретной аппаратной платформе. Это значит, что купив любой персональный компьютер или ноутбук, вы без особых трудностей сможете установить на него Windows или Linux. MacOS в отличие от них рассчитана на запуск только на продукции Apple. Чтобы установить её на чём-то другом, вам потребуются [модифицированная версия ОС](https://ru.wikipedia.org/wiki/OSx86).

## Философия ОС

ОС во многом определяет инфраструктуру, доступную программисту. Она диктует не только доступные инструменты разработки, такие как IDE, компилятор, система сборки, но и некоторые архитектурные решения. Рассмотрим этот вопрос подробнее на примере Windows и Linux.

### Windows

Как вам известно, Windows - это проприетарная ОС. Это значит, что все её исходные коды закрыты для постороннего изучения и модификации. Вы не сможете законным способом узнать о ней больше, чем разработчики посчитают нужным вам сообщить. Чтобы установить Windows на свой компьютер, вам надо купить её у компании Microsoft. Однако, в большинстве случаев эта ОС уже предустановлена на новые компьютеры и ноутбуки, а её цена включена в стоимость устройства.

Обратите внимание, что целевая платформа Windows - это относительно дешевые персональные компьютеры. Многие могут позволить себе купить такое устройство. Это огромный рынок потребителей. Поэтому Microsoft стремится всеми силами предотвратить конкуренцию. Компания не хочет, чтобы на рынке появлялись ОС, которые бы копировали возможности Windows. Это желание совершенно справедливо и оправдано. Именно поэтому Microsoft заботится о защите своей интеллектуальной собственности не только техническими, но и юридическими путями. Строго говоря, пользовательское соглашение запрещает вам исследовать внутреннее устройство ОС.

За время существования Windows под неё было написано очень много программ. Первые из них (например пакет офисных приложений [Microsoft Office](https://ru.wikipedia.org/wiki/Microsoft_Office) или [стандартные приложения Windows](https://ru.wikipedia.org/wiki/%D0%9A%D0%B0%D1%82%D0%B5%D0%B3%D0%BE%D1%80%D0%B8%D1%8F:%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F_Windows)) создавались самой компанией Microsoft. Для сторонних разработчиков они послужили в некотором роде образцом того, как правильно писать программы под Windows. Очевидно, что Microsoft при разработке своих приложений придерживалась того же принципа закрытости, что и при разработке ОС: исходные коды должны быть закрыты, форматы данных недокументированны, возможности приложений недоступны для сторонних утилит. Опять же это решение было продиктовано заботой о защите интеллектуальной собственности компании от конкурентов.

Сторонние разработчики программ последовали примеру Microsoft и стали придерживаться той же философии закрытости. Большинство получившихся приложений самодостаточны и независимы друг от друга. Форматы их данных, как правило, закодированы и недокументированны. 

Если вы опытный пользователь компьютера, вы легко сможете представить себе типичное Windows приложение. Оно представляет собой окно с такими [элементами интерфейса](https://ru.wikipedia.org/wiki/%D0%AD%D0%BB%D0%B5%D0%BC%D0%B5%D0%BD%D1%82_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0), как кнопки, поля ввода, вкладки и т.д. Через это окно пользователь манипулирует данными (например текстом, изображением, звуковой записью и т.д.). Результат работы сохраняется на жёсткий диск компьютера и может быть повторно загружен. Скорее всего, если вы напишете собственное приложение, оно будет работать похожим образом. Именно подобную преемственность я и имел в виду, когда говорил об архитектурных решениях, продиктованных ОС.

### Linux

Linux является идейным наследником ОС [Unix](https://ru.wikipedia.org/wiki/Unix) и следует её спецификациям. Следование спецификациям означает заимствование идей и решений, что в результате приводит к похожему поведению.

Сама Unix возникла в конце 1960-х годов. Она разрабатывалась как хобби проект двух инженеров компании Bell Labs: Кеном Томпсоном и Деннисом Ритчи. Всё началось с того, что Кен разработал компьютерную игру [Space Travel](https://ru.wikipedia.org/wiki/Space_Travel). Она запускалась на [мэйнфреймах](https://ru.wikipedia.org/wiki/%D0%9C%D0%B5%D0%B9%D0%BD%D1%84%D1%80%D0%B5%D0%B9%D0%BC) компании General Electric, работающих под управлением ОС GECOS. Такие компьютеры стоили дорого, и их вычислительные ресурсы активно использовались для нужд компании. Поэтому Кен решил портировать свою игру на относительно недорогой компьютер [PDP-7](https://ru.wikipedia.org/wiki/PDP-7) стоимостью порядка 72000$. Проблема была в том, что игра использовала возможности ОС GECOS, которые были недоступны на PDP-7. Поэтому Кену и присоединившемуся к нему Деннису пришлось реализовать несколько библиотек и систем, которые впоследствии развились в Unix.

Очевидно, в своём проекте разработчики Unix не заботились о защите интеллектуальной собственности, поскольку не собирались продавать свою ОС. Она распространялась с открытым исходным кодом, доступным для изучения и модификации любым желающим. Изначально круг пользователей ограничивался сотрудниками компании Bell Labs. Позднее AT&T, которой принадлежала Bell Labs, предоставила исходный код Unix высшим учебным заведениям США. Таким образом развитие ОС продолжилось в университетских кругах.

Linux была создана в 1991 году Линусом Торвальдсом во время его обучения в Хельсинкском университете. Как и у создателей Unix, у него не было коммерческих интересов, связанных с продажей своей ОС. Поэтому она стала бесплатна и свободно распространялась с исходным кодом через Интернет.

На самом деле Linux - это не более чем ядро ОС, предоставляющее функции для работы с памятью, файловой системой, периферийными устройствами, а также управлением процессорным временем. Большинство функций системы были доступны через свободные [пользовательские компоненты GNU](https://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D0%B5%D0%BA%D1%82_GNU), которые Линус включил в [дистрибутив](https://ru.wikipedia.org/wiki/%D0%94%D0%B8%D1%81%D1%82%D1%80%D0%B8%D0%B1%D1%83%D1%82%D0%B8%D0%B2_Linux) своей ОС.

Изначально у Linux, как у и Unix, не было графической подсистемы. Все приложения пользователь запускал из [командной строки](https://ru.wikipedia.org/wiki/%D0%98%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%BE%D0%B9_%D1%81%D1%82%D1%80%D0%BE%D0%BA%D0%B8). В неё же печатались результаты их исполнения. Некоторые из сложных приложений имели [оконный текстовый интерфейс](https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BA%D1%81%D1%82%D0%BE%D0%B2%D1%8B%D0%B9_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81_%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D1%82%D0%B5%D0%BB%D1%8F#%D0%9E%D1%81%D0%BE%D0%B1%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8_%D1%82%D0%B5%D0%BA%D1%81%D1%82%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE_%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D1%84%D0%B5%D0%B9%D1%81%D0%B0) пользователя. Со временем в Linux появилась оконная система [X Window System](https://ru.wikipedia.org/wiki/X_Window_System), а вместе с ней и более привычные Windows пользователям приложения с графическим интерфейсом.

Инфраструктура, в которой возник и развивался Linux, во многом определила культуру написания приложений. В ней предпочтение отдаётся узкоспециализированным утилитам командной строки, которые выполняют одну конкретную задачу. Результат работы таких утилит доступен для распространения через открытый формат данных (обычно [текстовый](https://ru.wikipedia.org/wiki/%D0%A2%D0%B5%D0%BA%D1%81%D1%82%D0%BE%D0%B2%D1%8B%D0%B5_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5)), который можно прочитать в обычном текстовом редакторе. Исходный код самих утилит, как правило, доступен для модификации.

Культура Linux значительно отличается от стандартов разработки, принятых в Windows. Там каждое приложение монолитно и самостоятельно выполняет все необходимые для своей работы задачи. Оно не полагается на сторонние утилиты, которые могут оказаться платными или недоступными для пользователя по какой-то причине. Разработчик должен полагаться только на себя. Он не может требовать от пользователя купить что-то дополнительное для работы своего приложения. В Linux же подавляющее большинство утилит бесплатны, взаимозаменяемы и легко доступны через Интернет. Поэтому вполне естественно, что какое-то приложение попросит установить и скачать недостающие ему системные компоненты.

Даже монолитные графические приложения в Linux очень часто имеют текстовый интерфейс. Таким образом они органично вписываются в экосистему и легко интегрируются с другими утилитами и приложениями.

Когда сложный вычислительный процесс строится на использовании набора отдельных узкоспециализированных приложений, становится насущным вопрос в написании сценариев по которому они должны вызываться. Именно для этой задачи была создана [командная оболочка](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%BD%D0%B0%D1%8F_%D0%BE%D0%B1%D0%BE%D0%BB%D0%BE%D1%87%D0%BA%D0%B0_Unix) Bash.