## Арифметические выражения

TODO

### Арифметические операции

TODO

### Оператор ((

Bash поддерживает целочисленную арифметику. Она выполняет в так называемом **математическом контексте** (math context).

Для вычисления арифметических выражений используется оператор `((`. Результат его работы зависит от наличия знака `$`. Если перед оператором стоит `$`, арфиметическое выражение будет вычисленно и интерпретатор подставит его результат. Если знакак `$` нет, после вычисления будет подставлено логическое значение, соответствующее результату. Рассмотрим эти случаи на примерах.

Предположим, что вам необходимо сохранить в переменной `var` результат сложения двух чисел. Вы можете объявить её целочисленной и присвоить ей значение при объявлении без дополнительных операторов. Например так:
{line-numbers: false, format: Bash}
```
declare -i var=12+7
```

Если переменная объявлена как строковая, вы также можете присвоить ей результат арфиметического выражения с помощью оператора `((`. Например:
{line-numbers: false, format: Bash}
```
var=$((12+7))
```

Оператор `((` является синонимом встроенной команды `let`, точно так же как оператор `[[` является синонимом `test`.

С помощью команды `let` мы можем записать прошлый пример следующими способами:
{line-numbers: true, format: Bash}
```
let var=12+7
let var="12 + 7"
let "var = 12 + 7"
let 'var = 12 + 7'
```

Обратите внимание, что каждый параметр команды `let` должен быть корректным арифметическим выражением. Если в выражении встречаются пробелы, оно будет разделено ими на части в результате word splitting. Тогда `let` попытается вычислить каждую часть по отдельности, что приведёт к ошибке. Это значит, что следующее выражение будет некорректно:
{line-numbers: false, format: Bash}
```
let var=12 + 7
```

Чтобы предотвратить word splitting, необходимо заключать выражение в одинарные или двойные кавычки. Эта подстановка не выполняется в операторе `((`. Поэтому всегда предпочитайте использовать его.

I> Кроме встроенной команды `let` есть две другие устаревшие формы для вычисления арифметических выражений: `$[ ]` и `expr`. Никогда их не используйте.

Таблица 3-9 демонстрирует операции, допустимые в арфиметических выражениях.

{caption: "Таблица 3-9. Операции в арифметических выражениях", width: "100%"}
| Операция | Описание | Пример |
| --- | --- | --- |
| | **Вычисления** | |
|  | | |
| `*` | Умножение | `echo "$((2*9)) = 18"` |
| `/` | Деление | `echo "$((25/5)) = 5"` |
| `%` | Остаток от деления | `echo "$((8%3)) = 2"` |
| `+` | Сложение | `echo "$((7+3)) = 10"` |
| `-` | Вычитание | `echo "$((8-5)) = 3"` |
| `**` | Возведение в степень |  `echo "$((4**3)) = 64"` |
|  | | |
| | **Битовые операции** | |
|  | | |
| `~` |  | |
| `<<` |  | |
| `>>` |  | |
| `&` |  | |
| `^` |  | |
| `|` |  | |
|  | | |
| | **Присваивания** | |
|  | | |
| `=` | Обычное присваивание | `echo "$((num=5)) = 5"` |
| `*=` | Умножение и присваивание результата | `echo "$((num+=5)) = 10"` |
| `/=` | Деление и присваивание результата | `echo "$((num/=2)) = 5"` |
| `%=` | Остаток от деления и присваивание результата | `echo "$((num%=2)) = 1"` |
| `+=` | Сложение и присваивание результата | `echo "$((num+=7)) = 8"` |
| `-=` | Вычитание и присваивание результата | `echo "$((num-=3)) = 5"` |
| `<<=` | Битовый сдвиг влево и присваивание результата | `echo "$((num<<=1)) = 10` |
| `>>=` | Битовый сдвиг вправо и присваивание результата | `echo "$((num>>=2)) = 2"` |
| `&=` | Побитовое И (AND), затем присваивание результата | `echo "$((num&=3)) = 2"` |
| `^=` | Побитовое [исключающее ИЛИ](https://ru.wikipedia.org/wiki/Исключающее_«или») (XOR), затем присваивание результата | `echo "$((num^=7)) = 5"` |
| `|=` | Побитовое ИЛИ (OR), затем присваивание результата | `echo "$((num|=7)) = 7"` |
|  | | |
| | **Логические операции** | |
|  | | |
| `!` |  | |
| `&&` |  | |
| `||` |  | |
|  | | |
| | **Сравнения** | |
|  | | |
| `<` |  | |
| `>` |  | |
| `<=` |  | |
| `>=` |  | |
| `==` |  | |
| `!=` |  | |
|  | | |
| | **Другие операции** | |
|  | | |
| `num++` |  | |
| `num--` |  | |
| `++num` |  | |
| `--num` |  | |
| `+num` |  | |
| `-num` |  | |
| `УСЛОВИЕ ? ДЕЙСТВИЕ1 : ДЕЙСТВИЕ2` |  | |
| `ДЕЙСТВИЕ1, ДЕЙСТВИЕ2` |  | |
| `( ДЕЙСТВИЕ1 )` |  | |

// TODO: Объяснить все операции

// TODO: Таблица с форматами чисел (системы счисления).
